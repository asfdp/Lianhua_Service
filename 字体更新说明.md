# 字体更新说明

## 📝 更新概述

本次更新将项目字体从 **PingFang SC** 更换为 **思源黑体 (Noto Sans SC)**，并将所有字体尺寸统一缩小 **4个单位**。

## 🔤 字体变更

### 原字体
- **字体名称**: PingFang SC
- **字体类型**: 系统自带字体

### 新字体
- **字体名称**: Noto Sans SC (思源黑体简体中文版)
- **字体来源**: Google Fonts
- **字体特点**: 
  - 开源字体，支持多语言
  - 优秀的可读性和美观性
  - 适合屏幕显示
  - 字重丰富，支持多种粗细

## 📐 字体大小变更对照表

| 样式类型 | 原大小 | 新大小 | 用途说明 |
|---------|--------|--------|----------|
| **H1** | 28px | **24px** | 页面主标题 |
| **H2** | 24px | **20px** | 用户名、区域标题 |
| **H3** | 20px | **16px** | 轮播标题、金额 |
| **Body Large** | 18px | **14px** | 重要标题、导航 |
| **Body Medium** | 16px | **12px** | 正文、按钮、表单 |
| **Body Small** | 14px | **10px** | 辅助文字、时间 |
| **Caption** | 12px | **8px** | 标签、导航、说明 |
| **Label** | 10px | **6px** | 角标数字 |

## 🛠️ 技术实现

### 1. 依赖更新
在 `pubspec.yaml` 中添加了 Google Fonts 依赖：
```yaml
dependencies:
  google_fonts: ^6.1.0
```

### 2. 字体配置更新
修改 `lib/utils/app_text_styles.dart`：
- 引入 `google_fonts` 包
- 将所有 `const TextStyle` 改为 `TextStyle get` 
- 使用 `GoogleFonts.notoSansSc()` 方法创建字体样式
- 统一缩小所有字体大小4个单位

### 3. 核心代码更改
```dart
// 新的字体创建方法
static TextStyle _getNotoSansStyle({
  required double fontSize,
  required FontWeight fontWeight,
  required Color color,
  required double height,
}) {
  return GoogleFonts.notoSansSc(
    fontSize: fontSize,
    fontWeight: fontWeight,
    color: color,
    height: height,
  );
}

// 样式定义示例
static TextStyle get h1 => _getNotoSansStyle(
  fontSize: 24,  // 原28px缩小4个单位
  fontWeight: FontWeight.bold,
  color: AppColors.primaryTextColor,
  height: 1.2,
);
```

## 📱 视觉效果变化

### 预期改善
- **更好的可读性**: 思源黑体专为屏幕显示优化
- **更加紧凑**: 缩小字体大小使界面更加精简
- **统一性提升**: 使用统一的字体规范
- **跨平台一致性**: Google Fonts保证不同平台的显示一致性

### 用户体验
- **内容密度提升**: 同样空间可以显示更多内容
- **视觉层次更清晰**: 字体大小差异保持相对比例
- **现代感增强**: 思源黑体具有现代简洁的设计风格

## 🎯 应用场景对照

### H1 (24px) - 页面主标题
**使用场景**: 
- 社区投票页面标题
- 智慧物业服务主标题
- 重要功能页面标题

**示例**: "社区投票"、"智慧物业服务"

### H2 (20px) - 中标题
**使用场景**:
- 用户名显示
- 区域标题
- 功能模块标题

**示例**: "DASEIN"、"我的服务"

### H3 (16px) - 小标题
**使用场景**:
- 轮播图标题
- 金额显示
- 卡片标题

**示例**: "智慧物业服务"、"¥299"

### Body Large (14px) - 重要内容
**使用场景**:
- 重要标题
- 导航文字
- 按钮文字（重要）

**示例**: "物业公告"、"报事报修"

### Body Medium (12px) - 正文内容
**使用场景**:
- 正文内容
- 按钮文字
- 表单标签

**示例**: "滇池卫城"、"立即缴费"

### Body Small (10px) - 辅助信息
**使用场景**:
- 辅助说明文字
- 时间显示
- 次要信息

**示例**: "访问时间"、"让生活更美好"

### Caption (8px) - 标签说明
**使用场景**:
- 标签文字
- 导航文字
- 说明文字

**示例**: "业主"、"首页"、"2025年1月"

### Label (6px) - 角标数字
**使用场景**:
- 角标数字
- 徽章文字
- 极小提示文字

**示例**: 消息角标"3"、未读提醒数量

## 🔧 开发注意事项

### 1. 字体加载
- 首次使用思源黑体时，Google Fonts会自动下载字体文件
- 建议在app启动时预加载字体以避免首次显示时的延迟

### 2. 性能考虑
- Google Fonts会缓存字体文件，后续加载会更快
- 网络不佳时可能影响首次字体加载

### 3. 兼容性
- 所有样式都保持了向后兼容性
- 旧的样式名称仍然可用（如 `body`、`title` 等）

### 4. 自定义样式
如需创建自定义字体样式，使用：
```dart
TextStyle customStyle = AppTextStyles.bodyMedium.copyWith(
  fontSize: 15,
  color: Colors.blue,
);
```

## ✅ 测试验证

### 需要验证的功能
1. **字体显示**: 确认思源黑体正确加载和显示
2. **字体大小**: 验证所有文字大小符合新规范
3. **可读性**: 确认较小字体仍然清晰可读
4. **布局影响**: 检查字体变小后是否影响界面布局
5. **性能**: 验证字体加载不影响app启动速度

### 测试设备
- 不同尺寸屏幕（手机、平板）
- 不同系统版本（Android、iOS）
- 不同网络环境（Wi-Fi、移动网络、离线）

## 🚀 后续优化

### 1. 字体预加载
可以在app启动时预加载字体：
```dart
void preloadFonts() async {
  await GoogleFonts.pendingFonts([
    GoogleFonts.notoSansSc(),
  ]);
}
```

### 2. 离线字体
如果需要离线支持，可以将字体文件下载到本地：
- 下载思源黑体字体文件
- 将文件放入 `fonts/` 目录
- 在 `pubspec.yaml` 中配置本地字体

### 3. 动态字体大小
可以根据用户设置或系统设置动态调整字体大小：
```dart
double scaleFactor = MediaQuery.of(context).textScaleFactor;
```

## 📞 问题反馈

如果在使用过程中发现问题，请及时反馈：
- 字体显示异常
- 可读性问题
- 性能问题
- 布局错位

---

**更新版本**: v2.0.0  
**更新时间**: 2025年1月  
**影响范围**: 全项目字体系统  
**向后兼容**: ✅ 是 